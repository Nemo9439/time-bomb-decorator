# GENERATED BY npx mrm @ob-npm-common/mrm-task-commit-jira-issue
if ! git rev-parse HEAD &> /dev/null; then
  exit 0
fi

currentBranch=$(git rev-parse --abbrev-ref HEAD)
regex="([A-Z]{2,}-[0-9]+)-.+|release\/([A-Z]{2,}-[0-9]+)-.+"

if [[ "$currentBranch" =~ $regex ]]; then
  jiraIssue="${BASH_REMATCH[1]}${BASH_REMATCH[2]}"
fi

if [ -n "$jiraIssue" ]; then
  if ! grep "$jiraIssue" "$1"; then
    echo >>"$1"
    echo "$jiraIssue" >>"$1"
  fi
fi

